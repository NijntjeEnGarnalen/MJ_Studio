@import url("https://fonts.googleapis.com/css2?family=Albert+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap");

:root {
  --inch: 96px;

  /* 设计基准（不缩放） */
  --design-w0: calc(15 * var(--inch));
  /* 1440px */
  --page-m0: calc(0.45 * var(--inch));
  /* 42px */
  --gutter0: calc(0.25 * var(--inch));
  /* 24px */
  --col0: calc(2.625 * var(--inch));
  /* 252px */

  /* 第一行到灰色块距离（基准） */
  --row-gap-top0: calc(0.05 * var(--inch));
  --gap-meta-to-next0: calc(0.6737 * var(--inch));

  /* 缩放系数（JS 会写入） */
  --s: 1;

  /* 顶栏实际高度（JS 会写入，给锚点留空） */
  --top-fixed-h: 0px;

  /* 缩放后的派生尺寸 */
  --design-w: calc(var(--design-w0) * var(--s));
  --page-m: calc(var(--page-m0) * var(--s));
  --gutter: calc(var(--gutter0) * var(--s));
  --col: calc(var(--col0) * var(--s));

  --row-gap-top: calc(var(--row-gap-top0) * var(--s));
  --gap-meta-to-next: calc(var(--gap-meta-to-next0) * var(--s));

  /* 字号：15pt≈20px，12pt≈16px（再乘缩放） */
  --fs-15: calc(20px * var(--s));
  /* 15pt */
  --fs-12: calc(16px * var(--s));
  /* 12pt */
  --fs-10: calc(13.33px * var(--s));
  /*  10pt */
  --fs-8: calc(10.67px * var(--s));
  /* 8pt  */

  --lh-15: calc(20px * var(--s));
  /* 15pt 行距 */
  --lh-16: calc(21.33px * var(--s));
  /* 16pt 行距 */
  --lh-18: calc(24px * var(--s));
  /* ✅ 18pt 行距 */

  --lh-13: calc(17.33px * var(--s));
  /* 13pt */

  --scroll-m0: calc(0.1875 * var(--inch));
  /* 灰色块离顶端的基准 margin */
  --scroll-m: calc(var(--scroll-m0) * var(--s));
}

/* 14pt 行距（全页统一） */
:root {
  --lh-14: calc(18.67px * var(--s));
  /* 14pt ≈ 18.67px */
  --fs-14: calc(18.67px * var(--s));
  /* 14pt */
}

* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  font-family: "Albert Sans", system-ui, sans-serif;
  color: #111;
  background: #ffffff;
}

/* ===== 固定顶栏：透明底，不缩放（因为尺寸本身已缩放） ===== */
.top-fixed {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: var(--design-w);
  padding: var(--page-m);
  background: transparent;
  z-index: 999;
}

.top {
  display: grid;
  grid-template-columns: repeat(5, var(--col));
  column-gap: var(--gutter);
  align-items: start;
}

.brand {
  grid-column: 1;
  font-weight: 700;
  font-size: var(--fs-12);
  line-height: 1.15;
  color: #e7018a;
}

.brand a {
  text-decoration: none;
  color: inherit;
}

.topnav {
  grid-column: 5 / 6;
  font-weight: 700;
  font-size: var(--fs-12);
  line-height: 1.15;

  /* ✅ 关键：第 5 列内部再分 3 格 */
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  align-items: start;
  width: 100%;
}

.topnav a {
  position: static;
  text-decoration: none;
  color: #e7018a;
}

.topnav .index {
  justify-self: start;
}

.topnav .work {
  justify-self: center;
}

.topnav .about {
  justify-self: end;
}

/* 顶栏占位（JS 写入高度） */
.top-spacer {
  height: 0px;
}

/* ===== 页面主体：不再 transform ===== */
.stage {
  width: 100%;
  display: flex;
  justify-content: center;
}

.page-sizer {
  width: var(--design-w);
}

.page {
  width: var(--design-w);
  padding: var(--page-m);
}

/* 主体 */
.main {
  margin-top: var(--row-gap-top);
  display: grid;
  grid-template-columns: repeat(5, var(--col));
  column-gap: var(--gutter);
  align-items: start;
}

/* 左侧列表 */
.left {
  grid-column: 1;
  font-size: var(--fs-12);
  font-weight: 400;
  line-height: var(--lh-18);
  font-variant-numeric: tabular-nums;
}

.project-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.plink {
  display: grid;
  grid-template-columns: 2ch auto;
  column-gap: 2.2ch;
  align-items: baseline;
  text-decoration: none;
  color: #111;
}

.plink .num {
  text-align: left;
}

.plink .txt {
  text-align: left;
  white-space: nowrap;
}

/* 右侧项目（第4、5列） */
.right {
  grid-column: 4 / 6;
  font-size: var(--fs-10);
  font-weight: 400;
  line-height: 1.25;
}

/* 关键：让锚点滚动时自动留出 顶栏 + 缩放后 margin */
.item {
  scroll-margin-top: calc(var(--top-fixed-h) + var(--scroll-m));
  display: grid;
  grid-template-columns: auto 1fr;
  column-gap: var(--gutter);
  margin-bottom: var(--gap-meta-to-next);
}

.item-no {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.item-no .no {
  display: inline-block;
  width: 2ch;
  text-align: right;
}

/* 灰色块：3:2 */
.media {
  width: 100%;
  aspect-ratio: 3 / 2;
  background: #8c8c8c;
  overflow: hidden;
}

.meta {
  margin-top: calc(10px * var(--s));
}

.media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.bottom {
  margin-top: calc(2 * var(--inch) * var(--s));
  font-size: var(--fs-10);
  font-weight: 400;
  line-height: 1.2;

  display: grid;
  grid-template-columns: repeat(5, var(--col));
  column-gap: var(--gutter);
}

.footer-inner {
  grid-column: 1;
}

.end-spacer {
  grid-column: 4 / 6;
  width: 100%;
  aspect-ratio: 3 / 0.666;
}

/* ===== Project Page (same 5-col grid, same margins/gutter) ===== */

.project-main {
  margin-top: var(--row-gap-top);
  display: grid;
  grid-template-columns: repeat(5, var(--col));
  column-gap: var(--gutter);
  align-items: start;
}

.project-hero {
  grid-column: 1 / 6;
  display: grid;
  grid-template-columns: repeat(5, var(--col));
  column-gap: var(--gutter);
  align-items: start;
}

/* ✅ 所有灰色块：都占左起四列，3:2 */
.proj-media {
  grid-column: 1 / 5;
  aspect-ratio: 3 / 2;
  overflow: hidden;
}

.ph {
  width: 100%;
  height: 100%;
  background: #8c8c8c;
}

.proj-side {
  grid-column: 5 / 6;
  text-align: left;
  line-height: var(--lh-14);
}

.proj-title {
  font-size: var(--fs-14);
  font-weight: 500;
  line-height: var(--lh-14);
}

.proj-sub {
  font-size: var(--fs-10);
  line-height: var(--lh-14);
  font-weight: 400;
}

.proj-media-stack {
  grid-column: 1 / 6;
  margin-top: var(--gutter);

  display: grid;
  grid-template-columns: repeat(5, var(--col));
  column-gap: var(--gutter);
  row-gap: var(--gutter);
}

.proj-media {
  grid-column: 1 / 5;
  aspect-ratio: 3 / 1.8;
  overflow: hidden;
}

.proj-media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.proj-title + .proj-sub {
  margin-top: calc(8px * var(--s));
}

.proj-text {
  grid-column: 1 / 3;
  margin-top: var(--gutter);

  font-size: var(--fs-10);
  line-height: var(--lh-14);

  hyphens: none;
  -webkit-hyphens: none;
  -ms-hyphens: none;

  orphans: 2;
  widows: 2;
  text-wrap: pretty;
}

.proj-media.fit-h {
  display: flex;
  align-items: center;
  justify-content: center;
}

.proj-media.fit-h img {
  height: 100%;
  width: auto;
  object-fit: contain;
}

/* Resume hover */
.resume-hover{
  position: relative;
  cursor: pointer;
  text-decoration: none;
  color: #111;
}

.resume-tip{
  display: none;
  margin-left: 0.5em;
  font-size: var(--fs-10);
  line-height: var(--lh-13);
  color: #777;
}

.resume-hover:hover{
  text-decoration: none;
}

.about-links a{
  text-decoration: none;
  color: #111;
  display: block;
}

.about-links a:hover{
  text-decoration: none;
}

.about-links a.resume-hover{
  cursor: pointer;
}

.about-links a.resume-hover .resume-tip{
  display: none;
  margin-left: 0.5em;
  font-size: var(--fs-10);
  line-height: var(--lh-13);
  color: #777;
}

.about-links a.resume-hover:hover .resume-tip{
  display: inline;
}

/* =========================
   Mobile-only layout
   - 关键修复：右侧空白/横向溢出
   ========================= */

.desktop-only { display: block; }
.mobile-only  { display: none; }

@media (max-width: 768px) {
  .desktop-only { display: none; }
  .mobile-only  { display: block; }

  /* ✅ 防止横向溢出导致右侧空白/可横向拖动 */
  html, body { overflow-x: hidden; }

  .mobile-scroll{
    width: 100%;
    min-height: 100vh;
    overflow-y: auto;
    overflow-x: hidden;   /* ✅ */
    background: #fff;
  }

  /* ✅ 让缩放画板贴左（不要居中） */
  .mobile-scale-wrap{
    width: 100%;
    display: flex;              /* ✅ */
    justify-content: flex-start;/* ✅ */
    align-items: flex-start;
  }

  /* 画板：固定宽 4in，高度由内容决定（JS 负责 scale + wrap 高度） */
  #mobileArtboard{
    width: 4in;
    height: auto;
    transform-origin: top left;
  }

  .mobile-page{
    box-sizing: border-box;
    padding: 0.25in 0.125in;
    display: flex;
    flex-direction: column;
  }

  .m-topbar{
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }

  .m-brand a, .m-topnav a{
    font-family: "Albert Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    font-weight: 700;
    font-size: 10pt;
    line-height: 10pt;
    color: #ff2aa1;
    text-decoration: none;
  }

  .m-topnav{
    display:flex;
    gap: 0.18in;
  }

  .m-list{
    display: flex;
    flex-direction: column;
    padding-top: 0.3in;
  }

  .m-thumb{
    display: block;
    width: 3.75in;
    height: 2.3711in;
    background: #888;
    text-decoration: none;
  }

  .m-thumb-bg{
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
  }

  .m-meta{
    margin-top: 0.072in;
    margin-bottom: 0.3in;
    font-family: "Albert Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    font-weight: 400;
    font-size: 8pt;
    line-height: 10pt;
    color: #111;
  }

  .m-footer{
    margin-top: 0.5in;
    font-family: "Albert Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    font-weight: 400;
    font-size: 8pt;
    line-height: 10pt;
    color: #111;
  }
}
